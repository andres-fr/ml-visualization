

# TensorBoard Mechanics

TensorBoard (TB) is a suite of [machine-learning related visualization tools](https://raw.githubusercontent.com/lanpa/tensorboard-pytorch/master/screenshots/Demo.gif) designed to run on a HTTP server, so they can be then visited by a web browser locally and remotely. It is delivered as a part of the TensorFlow (TF) libraries, and the [TF tutorials](https://www.tensorflow.org/api_guides/python/summary) provide an explanation for the TF-specific usage, but it can be used with other platforms like PyTorch or simply from Python as explained in [this SO post](https://stackoverflow.com/questions/37902705/how-to-manually-create-a-tf-summary) and covered later.

As for September 2017, TensorBoard provides built-in visualization support for **scalar functions, images, histograms, text, audio and distributions**, as well as for **projector and profiling data**. For the TF platform, it also provides an inspection tool for the **computational graph**. Also, via its [recently released API](https://github.com/tensorflow/tensorboard-plugin-example), it is possible to develope **custom plugins** to provide support for further visualizations and UI. This is also covered here.


### Logdir and Summaries

Once started, the TB server inspects periodically a **log directory** (logdir) that holds the data generated by the Python code. If new information is found, the visualizations are updated. The logdir has to be specified when starting the TB server as follows: `tensorboard --logdir=<LOG_DIRECTORY>`. The IP and port can also be specified (the default value is `localhost:6006`).

This logdir contains a set of [protocol buffers](https://developers.google.com/protocol-buffers/) (protobufs), which are basically extensible strings that contain data like functions, images, audio files, as well as the metadata attached to them like date and title. Especially important is the `tag` field, which is a string that is uniquely associated with a certain “stream” of related data.

As described in [TF tutorials](https://www.tensorflow.org/api_guides/python/summary), the `tf.summary.FileWriter` class manages the output to the protobufs, and the writing operations are performed by functions like `tf.summary.tensor_summary`, `tf.summary.scalar`, `tf.summary.histogram`, `tf.summary.audio` or `tf.summary.image`, depending on the desired visualization.

The contents of the writing operation are represented in TensorFlow by objects of the [`tf.Summary`](https://www.tensorflow.org/api_docs/python/tf/Summary) class, which are [Tensors](https://www.tensorflow.org/api_docs/python/tf/Tensor) that can accept NumPy arrays or other types of Python's numerical collections as their construction arguments. The writer handles their conversion to the corresponding protobuf.

This allows us to define a Logger class that encapsulates all this functionality, and given simple numerical arrays, outputs data to a logdir that can be directly consumed by the TB server. This is explained in the next subsection.


### The Logger

The goal of this class, implemented in [this python file](https://github.com/yunjey/pytorch-tutorial/blob/master/tutorials/04-utils/tensorboard/logger.py), is to provide a clean and flexible interface between any Python program and the TB server.




### TB Pluging API

Front-end: groups the entries in "runs"



### SSH TUnneling

In some cases, the computer holding the log files is only accessible via SSH and prevents visiting the TensorBoard HTTP server. In that case, SSH tunneling can be performed: The following command forwards TensorBoard to `localhost:16006`, assuming it was started with the default IP address:
`ssh -p <PORT> <USER>@<SERVER> -N -f -L localhost:16006:localhost:6006`
https://git.ccc.cs.uni-frankfurt.de/rodriguez/dnc-tracking/blob/master/wiki/basic_interactions.md




## TODO

- [x] tell about tensorboard, html, protocol buffers. And about the default contents of it (scalars etc)
- [x] tell about summarywriters, summaries, tensors
- [x] but summaries also accept other neutral data like lists, ndarrays, buffers...
- [ ] check if TB has support for conf matrix plotting
- [ ] so it is possible to build a logger. that is exactly the pytorch one (refer to it, make tutorial)
- [ ] the plugins: possible applications (3D t-sne, videos, TB SNAPSHOT)
- [ ] sometimes it may not be enough scalars etc. So the plugins api (link to video). Things to add: videos, 3D t-sne...
