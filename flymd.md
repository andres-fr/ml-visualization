

# TensorBoard Mechanics

TensorBoard (TB) is a suite of [machine-learning related visualization tools](https://raw.githubusercontent.com/lanpa/tensorboard-pytorch/master/screenshots/Demo.gif) designed to run on a HTTP server, so they can be then visited by a web browser locally and remotely. It is delivered as a part of the TensorFlow (TF) libraries, and the [TF tutorials](https://www.tensorflow.org/api_guides/python/summary) provide an explanation for the TF-specific usage, but it can be used with other platforms like PyTorch  (PT) or simply from Python as explained in [this SO post](https://stackoverflow.com/questions/37902705/how-to-manually-create-a-tf-summary) and described later (Actually, it can be run from other languages like [Ruby](https://github.com/somaticio/tensorflow.rb) as well but only Python will be covered here).

As for September 2017, TensorBoard provides built-in visualization support for **scalar functions, images, histograms, text, audio and distributions**, as well as for **projector and profiling data**. For the TF and PT platforms, it also provides an inspection tool for the **computational graph**. also, via its [recently released api](https://github.com/tensorflow/tensorboard-plugin-example), it is possible to develope **plugins** to provide support for custom visualizations and ui. this is also covered here.


### logdir and summaries

once started, the tb server inspects periodically a **log directory** (logdir) that holds the data generated by the python code. if new information is found, the visualizations are updated. the logdir has to be specified when starting the tb server as follows: `tensorboard --logdir=<log_directory>`. the ip and port can also be specified (the default value is `localhost:6006`).

this logdir contains a set of [protocol buffers](https://developers.google.com/protocol-buffers/) (protobufs), which are basically extensible strings that contain data like functions, images, audio files, as well as the metadata attached to them like date and title. especially important is the `tag` field, which is a string that is uniquely associated with a certain “stream” of related data, and that the tb server uses to collapse the visualizations into *tag* groups.

as described in [tf tutorials](https://www.tensorflow.org/api_guides/python/summary), the `tf.summary.filewriter` python class manages the output to the protobufs, and the writing operations are performed by functions like `tf.summary.tensor_summary`, `tf.summary.scalar`, `tf.summary.histogram`, `tf.summary.audio` or `tf.summary.image`, depending on the desired visualization.

the contents of the writing operation are represented in tensorflow by objects of the [`tf.summary`](https://www.tensorflow.org/api_docs/python/tf/summary) class, which can accept numpy arrays or other types of python's numerical collections or strings as their construction arguments. when passed to the writer together with a tag, they get conveniently translated to the corresponding protobuf.

this allows us to define a logger class that encapsulates all this functionality, as explained in the next subsection.


### the logger class

the goal of this repo's [`Logger`](code/logger.py) class is to provide a clean and flexible interface between any python program and the tb server. it is based on the [pytorch-tutorial github repo](https://github.com/yunjey/pytorch-tutorial/blob/master/tutorials/04-utils/tensorboard), with the following modifications:

* it consumes numpy and python native datatypes. The conversion from TB/PT native types *should* have little overhead.
* Instead of logging scalars, images and histograms, it includes more complete support for TB's  functionality (including the recently released plugin API?**)



fLyMd-mAkEr
### TB Pluging API

Front-end: groups the entries in "runs"



### SSH TUnneling

In some cases, the computer holding the log files is only accessible via SSH and prevents visiting the TensorBoard HTTP server. In that case, SSH tunneling can be performed: The following command forwards TensorBoard to `localhost:16006`, assuming it was started with the default IP address:
`ssh -p <PORT> <USER>@<SERVER> -N -f -L localhost:16006:localhost:6006`
https://git.ccc.cs.uni-frankfurt.de/rodriguez/dnc-tracking/blob/master/wiki/basic_interactions.md




## TODO

- [x] tell about tensorboard, html, protocol buffers. And about the default contents of it (scalars etc)
- [x] tell about summarywriters, summaries, tensors
- [x] but summaries also accept other neutral data like lists, ndarrays, buffers...
- [ ] check if TB has support for conf matrix plotting
- [ ] so it is possible to build a logger. that is exactly the pytorch one (refer to it, make tutorial)
- [ ] the plugins: possible applications (3D t-sne, videos, TB SNAPSHOT)
- [ ] sometimes it may not be enough scalars etc. So the plugins api (link to video). Things to add: videos, 3D t-sne...
